<html>
<head>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>

<body>
<div id="main-content">
	<div id="map-container">
		<div id="map" style="height: 600px;"></div>
	</div>
</div>
</body>

<script>
	var map = L.map('map').setView([51.505, -0.09], 13); // Centered on a default location
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

const services = [
    {
        name: "Bradford - Supported Living",
        location: "West Riding Business Centre, West Riding House, 41 Cheapside, Bradford, BD1 4HR",
        specialistAreas: "Supported Living",
        about: "Call for more information"
    },
    {
        name: "Kent Learning Disability Services",
        location: "IS7 and IS8 Kent Innovation Centre, Thanet Reach Business Park, Millenium Way, CT10 2QQ",
        specialistAreas: "Learning Disability Services",
        about: "Call for more information"
    },
    {
        name: "Bedford Learning Disability Support - Franklin Avenue",
        location: "18 Franklin Avenue, Bedford, MK45 4HF",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Barnsley Learning Disability Support",
        location: "Unit 25 Mount Osborne Business Centre, Oakwell View, Barnsley, S71 1HH",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Bradford Residential Care - Rix House",
        location: "24 Arncliffe Road, Keighley, BD22 6AR",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Derby Learning Disability Services",
        location: "Suites 2.1 & 2.2 South Gate Innovation Centre, Normanton Road, Derby, DE23 6UQ",
        specialistAreas: "Learning Disability Services",
        about: "Call for more information"
    },
    {
        name: "Hampshire - Supported Living",
        location: "Unit 3 The Sail Loft, Deacons Boatyard, Bridge Road, Southampton, Hampshire, SO31 8AZ",
        specialistAreas: "Supported Living",
        about: "Call for more information"
    },
    {
        name: "Brickfield Cottage",
        location: "Brickfield Cottage, Hare Street Road, SG9 0AB",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Watford Day Centre",
        location: "Watford Day Centre, Holy Road Church, Market Street, WD18 0PJ",
        specialistAreas: "Day Centre",
        about: "Call for more information"
    },
    {
        name: "Parkview",
        location: "113-015 Sussex Road, WD24 5HR",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Warwick LD Hancox Close",
        location: "7-8 Hancox Close, Weston Under Wetherley, CV33 9GD",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwickshire Learning Disability Support",
        location: "Sydni Centre, Cottage Square, Leamington Spa, CV31 1PT",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Wiltshire Learning Disability - Avondale",
        location: "62 Stratford Road, SP1 3JN",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Wiltshire Learning Disability - Hollygrove",
        location: "Flat 3, 49 Roman Road, SP2 9BJ",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Bedford Learning Disability Support - Pemdale",
        location: "26A Nursery Close, Off Sandy Road, SG19 2QG",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Bradford Residential Care - Reevy Road",
        location: "60 Reevy Court, Buttershaw, BD6 3LH",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Ambleside",
        location: "Wengeo Lane, SG12 0EQ",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Sybden House",
        location: "Sybden House, Pipers Hill, Great Gaddesden, HP1 3BY",
        specialistAreas: "Residential Care",
        about: "Call for more information"
    },
    {
        name: "Gloucestershire Learning Disability Support",
        location: "Ground Floor Winget House, 7 Beaufort Buildings, Spa Road, GL1 1XB",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Cumbria Learning Disability Support Carlisle",
        location: "5 Hillcrest Close, Carlisle, Cumbria, CA1 2QL",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Staffordshire & Wolverhampton",
        location: "Unit 5 Rutherford Court, Staffordshire Technology Park, ST18 0GP",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwick LD Masons Road",
        location: "145-147 Masons Road, CV37 9NZ",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwick LD Russell Terrace",
        location: "52 Russell Terrace, CV31 1HE",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwick LD The Cedars",
        location: "4 Chequer Street, CV12 9NH",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "The Willows",
        location: "4 & 5 Sadler Gardens, Coalpit Fields Road, CV12 9HG",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Staffordshire LD St Lukes",
        location: "Flats 1-5, 26 St Lukes Close, WS11 1BB",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Peterborough & Cambridgeshire",
        location: "Office 44 Pinnacle House Business Centre, Newark Road, PE1 5YD",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Staffordshire LD North Court",
        location: "North Court, 1a North Avenue, ST16 1NP",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Tameside Learning Disability Service",
        location: "Room 1&3 Caroline House, 146 Audenshaw Road, Manchester, M34 5HQ",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwick LD Coalpit Flats",
        location: "20a/b 21a/b 22a/b Sadler Gardens, Coalpitt Fields, CV12 9HG",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Warwick LD Marloes Walk",
        location: "14 Marloes Walk, CV31 1PA",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    },
    {
        name: "Wiltshire Learning Disability - Hollygrove",
        location: "Hollygrove, Roman Road, SP2 9BJ",
        specialistAreas: "Learning Disability Support",
        about: "Call for more information"
    }
];

function addToMap(service) {
    var url = 'https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(service.location) + '&format=json';
    
    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.length > 0) {
                var lat = data[0].lat;
                var lon = data[0].lon;
                console.log('Latitude: ' + lat + ', Longitude: ' + lon);
				var marker = L.marker([lat, lon]).addTo(map);
				marker.bindPopup("<b>" + service.name + "</b><br>Support: " + service.specialistAreas + "<br>Summary: " + service.about);
            } else {
                console.log('No results found');
            }
        })
        .catch(error => console.error('Error:', error));
}


services.forEach(function(service) {
	addToMap(service);
    //var marker = L.marker([geocodedAddress.lat, geocodedAddress.lon]).addTo(map);
   // marker.bindPopup("<b>" + service.name + "</b><br>Support: " + service.specialistAreas + "<br>Summary: " + service.about);
});
</script>

</html>
